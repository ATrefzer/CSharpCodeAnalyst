<UserControl x:Class="CSharpCodeAnalyst.Areas.AdvancedSearchArea.AdvancedSearchControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:CSharpCodeAnalyst.Areas.AdvancedSearchArea"
             xmlns:resources="clr-namespace:CSharpCodeAnalyst.Resources"
             xmlns:dd="urn:gong-wpf-dragdrop"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance local:AdvancedSearchViewModel}"
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/ButtonStyles.xaml" />
                <ResourceDictionary Source="/Styles/DataGridStyles.xaml" />
                <ResourceDictionary Source="/Styles/ImageStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- Search Box Area -->
                            <DockPanel Grid.Row="0" Margin="5" Background="LightYellow">
                                <Button Command="{Binding ClearSearchCommand}"
                                        ToolTip="{x:Static resources:Strings.ClearSearch_Tooltip}"
                                        DockPanel.Dock="Right"
                                        Width="22" Height="22" Margin="2,0,0,0">
                                    <Image Source="/Resources/clear_32.png" />
                                </Button>

                                <Grid DockPanel.Dock="Left" HorizontalAlignment="Stretch">
                                    <TextBox Height="22"
                                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                             Margin="0"
                                             Background="LightYellow"
                                             FontSize="12" />

                                    <Image Style="{StaticResource InfoStyle}"
                                           ToolTip="{x:Static resources:Strings.SearchPattern_Tooltip}" />
                                </Grid>
                            </DockPanel>

                            <!-- Results List -->
                            <DataGrid Grid.Row="1"
                                      dd:DragDrop.IsDragSource="True"
                                      x:Name="SearchDataGrid"
                                      Style="{StaticResource ReadOnlyGrid}"
                                      ItemsSource="{Binding FilteredItems}"
                                      AutoGenerateColumns="False"
                                      GridLinesVisibility="Horizontal"
                                      SelectionMode="Extended"
                                      Margin="5,0,5,0">
                                <DataGrid.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="{x:Static resources:Strings.AddSelectedToGraph_Label}"
                                                  Command="{Binding AddSelectedToGraphCommand}"
                                                  CommandParameter="{Binding PlacementTarget.SelectedItems, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                                        <MenuItem
                                            Header="{x:Static resources:Strings.AddSelectedToGraphCollapsed_Label}"
                                            Command="{Binding AddSelectedToGraphCollapsedCommand}"
                                            CommandParameter="{Binding PlacementTarget.SelectedItems, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />

                                        <Separator />
                                        <MenuItem Header="{x:Static resources:Strings.Partition}"
                                                  Command="{Binding PartitionCommand}"
                                                  CommandParameter="{Binding PlacementTarget.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu}}" />
                                        <Separator />

                                        <MenuItem Header="{x:Static resources:Strings.CopyFullQualifiedNameToClipboard}"
                                                  Command="{Binding CopyToClipboardCommand}"
                                                  CommandParameter="{Binding PlacementTarget.SelectedItems, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
                                            <MenuItem.Icon>
                                                <Image Source="/Resources/copy_fqn_16.png" />
                                            </MenuItem.Icon>
                                        </MenuItem>


                                    </ContextMenu>
                                </DataGrid.ContextMenu>
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Header="{x:Static resources:Strings.Type_Label}"
                                                            Width="Auto">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Image Source="{Binding Icon}" Width="16" Height="16"
                                                       ToolTip="{Binding Type}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>

                                    <DataGridTextColumn Header="{x:Static resources:Strings.Name_Label}"
                                                        Binding="{Binding Name}"
                                                        Width="Auto" />


                                    <DataGridTextColumn Header="{x:Static resources:Strings.FullPath_Label}"
                                                        Binding="{Binding FullPath}"
                                                        Width="Auto" />
                                </DataGrid.Columns>
                            </DataGrid>

                            <!-- Button Area -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="5">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!-- Main Button -->
                                    <Button Grid.Column="0"
                                            Content="{x:Static resources:Strings.AddSelectedToGraph_Label}"
                                            Command="{Binding AddSelectedToGraphCommand}"
                                            CommandParameter="{Binding SelectedItems, ElementName=SearchDataGrid}"
                                            FontWeight="Bold"
                                            Padding="15,5" />

                                    <!-- Dropdown Button -->
                                    <Button Grid.Column="1"
                                            Content="▼"
                                            FontSize="8"
                                            Width="20"
                                            Padding="0"
                                            x:Name="DropdownButton">
                                        <Button.ContextMenu>
                                            <ContextMenu>
                                                <MenuItem
                                                    Header="{x:Static resources:Strings.AddSelectedToGraphCollapsed_Label}"
                                                    Command="{Binding AddSelectedToGraphCollapsedCommand}"
                                                    CommandParameter="{Binding Path=Tag.SelectedItems, RelativeSource={RelativeSource Self}}" />
                                            </ContextMenu>
                                        </Button.ContextMenu>
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <EventSetter Event="Click" Handler="DropdownButton_Click" />
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </Grid>
</UserControl>
